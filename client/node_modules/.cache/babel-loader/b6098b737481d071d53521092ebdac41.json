{"ast":null,"code":"var _jsxFileName = \"/home/salko/Documents/Instagram-Clone/client/src/components/messenger/Chat/Chat.jsx\",\n    _s = $RefreshSig$();\n\nimport './chat.css';\nimport { useEffect, useState } from \"react\";\nimport Axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Chat(_ref) {\n  _s();\n\n  let {\n    user,\n    activeRoom,\n    socket\n  } = _ref;\n  Axios.defaults.withCredentials = true;\n  const [messages, setMessages] = useState([]);\n  const [message, setMessage] = useState('');\n  const [newMessage, setNewMessage] = useState('');\n\n  const sendMessageHandler = () => {\n    if (messages.length > 0) setMessages([...messages, {\n      text: message,\n      sender: user._id\n    }]);else setMessages([{\n      text: message,\n      sender: user._id\n    }]);\n    socket.current.emit(\"send_message\", {\n      message: message,\n      room: activeRoom._id\n    });\n    Axios.post(\"http://localhost:3001/api/messages\", {\n      sender: user._id,\n      text: message,\n      conversationId: activeRoom._id\n    }).then(response => {});\n    setMessage('');\n  };\n\n  useEffect(() => {\n    if (newMessage.room == activeRoom._id) {\n      if (messages.length > 0) setMessages([...messages, {\n        text: newMessage.message,\n        sender: \"dadada\"\n      }]);else setMessages([{\n        text: newMessage.message,\n        sender: \"datata\"\n      }]);\n    }\n  }, [newMessage]);\n  useEffect(() => {\n    if (socket.current) {\n      socket.current.on('receive_message', data => {\n        setNewMessage(data);\n      });\n    }\n\n    if (activeRoom) {\n      Axios.get(`http://localhost:3001/api/messages/${activeRoom._id}`).then(response => {\n        setMessages(response.data.sort((p1, p2) => {\n          return new Date(p1.createdAt) - new Date(p2.createdAt);\n        }));\n      });\n    } else console.log(\"there are no messages in: \" + activeRoom);\n  }, [activeRoom]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chat\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-top\",\n      children: [activeRoom && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat-room\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chat-room-icon\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: process.env.REACT_APP_PULIC_FOLDER + activeRoom.conversationImage,\n            alt: \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chat-room-info\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"chat-room-name\",\n            children: activeRoom.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"chat-room-status\",\n            children: \"Active now\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 27\n      }, this), /*#__PURE__*/_jsxDEV(\"svg\", {\n        \"aria-label\": \"View Thread Details\",\n        class: \"_8-yf5 \",\n        color: \"#262626\",\n        fill: \"#262626\",\n        height: \"24\",\n        role: \"img\",\n        viewBox: \"0 0 24 24\",\n        width: \"24\",\n        children: [/*#__PURE__*/_jsxDEV(\"circle\", {\n          cx: \"12.001\",\n          cy: \"12.005\",\n          fill: \"none\",\n          r: \"10.5\",\n          stroke: \"currentColor\",\n          \"stroke-linecap\": \"round\",\n          \"stroke-linejoin\": \"round\",\n          \"stroke-width\": \"2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 156\n        }, this), /*#__PURE__*/_jsxDEV(\"circle\", {\n          cx: \"11.819\",\n          cy: \"7.709\",\n          r: \"1.25\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 304\n        }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n          fill: \"none\",\n          stroke: \"currentColor\",\n          \"stroke-linecap\": \"round\",\n          \"stroke-linejoin\": \"round\",\n          \"stroke-width\": \"2\",\n          x1: \"10.569\",\n          x2: \"13.432\",\n          y1: \"16.777\",\n          y2: \"16.777\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 353\n        }, this), /*#__PURE__*/_jsxDEV(\"polyline\", {\n          fill: \"none\",\n          points: \"10.569 11.05 12 11.05 12 16.777\",\n          stroke: \"currentColor\",\n          \"stroke-linecap\": \"round\",\n          \"stroke-linejoin\": \"round\",\n          \"stroke-width\": \"2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 512\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-center\",\n      children: messages.map(m => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: m.sender == user._id ? \"message users-message\" : \"message\",\n        children: m.text\n      }, m._id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 29\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-bottom\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"message-input\",\n        children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n          \"aria-label\": \"Emoji\",\n          class: \"_8-yf5 \",\n          color: \"#262626\",\n          fill: \"#262626\",\n          height: \"24\",\n          role: \"img\",\n          viewBox: \"0 0 24 24\",\n          width: \"24\",\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            d: \"M15.83 10.997a1.167 1.167 0 101.167 1.167 1.167 1.167 0 00-1.167-1.167zm-6.5 1.167a1.167 1.167 0 10-1.166 1.167 1.167 1.167 0 001.166-1.167zm5.163 3.24a3.406 3.406 0 01-4.982.007 1 1 0 10-1.557 1.256 5.397 5.397 0 008.09 0 1 1 0 00-1.55-1.263zM12 .503a11.5 11.5 0 1011.5 11.5A11.513 11.513 0 0012 .503zm0 21a9.5 9.5 0 119.5-9.5 9.51 9.51 0 01-9.5 9.5z\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 142\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          value: message,\n          onChange: e => {\n            setMessage(e.target.value);\n          },\n          placeholder: \"Message...\",\n          className: \"msg-input\",\n          type: \"text\",\n          name: \"\",\n          id: \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 21\n        }, this), message == '' ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n            \"aria-label\": \"Add Photo or Video\",\n            class: \"_8-yf5 \",\n            color: \"#262626\",\n            fill: \"#262626\",\n            height: \"24\",\n            role: \"img\",\n            viewBox: \"0 0 24 24\",\n            width: \"24\",\n            children: [/*#__PURE__*/_jsxDEV(\"path\", {\n              d: \"M6.549 5.013A1.557 1.557 0 108.106 6.57a1.557 1.557 0 00-1.557-1.557z\",\n              \"fill-rule\": \"evenodd\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 165\n            }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n              d: \"M2 18.605l3.901-3.9a.908.908 0 011.284 0l2.807 2.806a.908.908 0 001.283 0l5.534-5.534a.908.908 0 011.283 0l3.905 3.905\",\n              fill: \"none\",\n              stroke: \"currentColor\",\n              \"stroke-linejoin\": \"round\",\n              \"stroke-width\": \"2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 272\n            }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n              d: \"M18.44 2.004A3.56 3.56 0 0122 5.564h0v12.873a3.56 3.56 0 01-3.56 3.56H5.568a3.56 3.56 0 01-3.56-3.56V5.563a3.56 3.56 0 013.56-3.56z\",\n              fill: \"none\",\n              stroke: \"currentColor\",\n              \"stroke-linecap\": \"round\",\n              \"stroke-linejoin\": \"round\",\n              \"stroke-width\": \"2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 483\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 27\n          }, this), /*#__PURE__*/_jsxDEV(\"svg\", {\n            \"aria-label\": \"Like\",\n            class: \"_8-yf5 \",\n            color: \"#262626\",\n            fill: \"#262626\",\n            height: \"24\",\n            role: \"img\",\n            viewBox: \"0 0 24 24\",\n            width: \"24\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              d: \"M16.792 3.904A4.989 4.989 0 0121.5 9.122c0 3.072-2.652 4.959-5.197 7.222-2.512 2.243-3.865 3.469-4.303 3.752-.477-.309-2.143-1.823-4.303-3.752C5.141 14.072 2.5 12.167 2.5 9.122a4.989 4.989 0 014.708-5.218 4.21 4.21 0 013.675 1.941c.84 1.175.98 1.763 1.12 1.763s.278-.588 1.11-1.766a4.17 4.17 0 013.679-1.938m0-2a6.04 6.04 0 00-4.797 2.127 6.052 6.052 0 00-4.787-2.127A6.985 6.985 0 00.5 9.122c0 3.61 2.55 5.827 5.015 7.97.283.246.569.494.853.747l1.027.918a44.998 44.998 0 003.518 3.018 2 2 0 002.174 0 45.263 45.263 0 003.626-3.115l.922-.824c.293-.26.59-.519.885-.774 2.334-2.025 4.98-4.32 4.98-7.94a6.985 6.985 0 00-6.708-7.218z\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 145\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: sendMessageHandler,\n          className: \"post-comment\",\n          children: \"Send\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Chat, \"avOFXaxy3lUWHwFyFvrSky+XnvY=\");\n\n_c = Chat;\n\nvar _c;\n\n$RefreshReg$(_c, \"Chat\");","map":{"version":3,"sources":["/home/salko/Documents/Instagram-Clone/client/src/components/messenger/Chat/Chat.jsx"],"names":["useEffect","useState","Axios","Chat","user","activeRoom","socket","defaults","withCredentials","messages","setMessages","message","setMessage","newMessage","setNewMessage","sendMessageHandler","length","text","sender","_id","current","emit","room","post","conversationId","then","response","on","data","get","sort","p1","p2","Date","createdAt","console","log","process","env","REACT_APP_PULIC_FOLDER","conversationImage","name","map","m","e","target","value"],"mappings":"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","sourcesContent":["import './chat.css'\nimport {useEffect, useState} from \"react\"\nimport Axios from 'axios';\n\nexport default function Chat({user, activeRoom, socket}) {\n\n    Axios.defaults.withCredentials = true;\n\n    const [messages, setMessages] = useState([]);\n    const [message, setMessage] = useState('');\n    const [newMessage, setNewMessage] = useState('')\n\n    \n    const sendMessageHandler = () => {\n        if(messages.length > 0) setMessages([...messages, {text: message, sender: user._id}])\n        else setMessages([{text: message, sender: user._id}]);\n\n        socket.current.emit(\"send_message\", {message: message, room:activeRoom._id })\n \n         Axios.post(\"http://localhost:3001/api/messages\", {\n            sender: user._id,\n            text: message,\n            conversationId: activeRoom._id\n         }).then((response) => {\n \n              \n         })\n         setMessage('')\n     }\n\n     useEffect(() => {\n        if(newMessage.room  == activeRoom._id){\n         if(messages.length > 0) setMessages([...messages, {text: newMessage.message, sender: \"dadada\"}])\n         else setMessages([{text: newMessage.message, sender: \"datata\"}]);}\n     }, [newMessage])\n\n    useEffect(() => {\n\n       if(socket.current){ socket.current.on('receive_message', (data) => {\n        setNewMessage(data)\n        })}\n\n           if(activeRoom) {Axios.get(`http://localhost:3001/api/messages/${activeRoom._id}`)\n            .then((response) => \n            \n            {setMessages(    \n                response.data.sort((p1, p2) => {\n                    return new Date(p1.createdAt) - new Date(p2.createdAt);\n                  })\n\n                );})  }  else console.log(\"there are no messages in: \" + activeRoom)    \n       \n      }, [activeRoom])\n\n\n\n\n\n\n    return (\n        <div className='chat'>\n            <div className=\"chat-top\">\n\n\n           {activeRoom && <div className=\"chat-room\">\n                    <div className=\"chat-room-icon\">\n                        <img src={process.env.REACT_APP_PULIC_FOLDER + activeRoom.conversationImage} alt=\"\" />\n                    </div>\n                    <div className=\"chat-room-info\">\n                        <div className=\"chat-room-name\">{activeRoom.name}</div>\n                        <div className=\"chat-room-status\">Active now</div>\n                    </div>\n                </div>}\n\n                <svg aria-label=\"View Thread Details\" class=\"_8-yf5 \" color=\"#262626\" fill=\"#262626\" height=\"24\" role=\"img\" viewBox=\"0 0 24 24\" width=\"24\"><circle cx=\"12.001\" cy=\"12.005\" fill=\"none\" r=\"10.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\"></circle><circle cx=\"11.819\" cy=\"7.709\" r=\"1.25\"></circle><line fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" x1=\"10.569\" x2=\"13.432\" y1=\"16.777\" y2=\"16.777\"></line><polyline fill=\"none\" points=\"10.569 11.05 12 11.05 12 16.777\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\"></polyline></svg>\n\n            </div>\n            <div className=\"chat-center\">\n                    {\n                         messages.map((m) => (\n                            <div key={m._id}\n                            \n                           className= {m.sender == user._id ? \"message users-message\" : \"message\"}>\n                                {m.text}\n                        </div>\n                        ))\n\n                    }\n\n            </div>{/**CHAT CENTER */}\n\n            <div className=\"chat-bottom\">\n                <div className=\"message-input\">\n                <svg aria-label=\"Emoji\" class=\"_8-yf5 \" color=\"#262626\" fill=\"#262626\" height=\"24\" role=\"img\" viewBox=\"0 0 24 24\" width=\"24\"><path d=\"M15.83 10.997a1.167 1.167 0 101.167 1.167 1.167 1.167 0 00-1.167-1.167zm-6.5 1.167a1.167 1.167 0 10-1.166 1.167 1.167 1.167 0 001.166-1.167zm5.163 3.24a3.406 3.406 0 01-4.982.007 1 1 0 10-1.557 1.256 5.397 5.397 0 008.09 0 1 1 0 00-1.55-1.263zM12 .503a11.5 11.5 0 1011.5 11.5A11.513 11.513 0 0012 .503zm0 21a9.5 9.5 0 119.5-9.5 9.51 9.51 0 01-9.5 9.5z\"></path></svg>\n                    <input value={message} \n                    onChange={(e)=>{setMessage(e.target.value)}}\n                    placeholder='Message...' className='msg-input' type=\"text\" name=\"\" id=\"\" />\n                    {\n                        message == '' ?\n                        <><svg aria-label=\"Add Photo or Video\" class=\"_8-yf5 \" color=\"#262626\" fill=\"#262626\" height=\"24\" role=\"img\" viewBox=\"0 0 24 24\" width=\"24\"><path d=\"M6.549 5.013A1.557 1.557 0 108.106 6.57a1.557 1.557 0 00-1.557-1.557z\" fill-rule=\"evenodd\"></path><path d=\"M2 18.605l3.901-3.9a.908.908 0 011.284 0l2.807 2.806a.908.908 0 001.283 0l5.534-5.534a.908.908 0 011.283 0l3.905 3.905\" fill=\"none\" stroke=\"currentColor\" stroke-linejoin=\"round\" stroke-width=\"2\"></path><path d=\"M18.44 2.004A3.56 3.56 0 0122 5.564h0v12.873a3.56 3.56 0 01-3.56 3.56H5.568a3.56 3.56 0 01-3.56-3.56V5.563a3.56 3.56 0 013.56-3.56z\" fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\"></path></svg>\n                    <svg aria-label=\"Like\" class=\"_8-yf5 \" color=\"#262626\" fill=\"#262626\" height=\"24\" role=\"img\" viewBox=\"0 0 24 24\" width=\"24\"><path d=\"M16.792 3.904A4.989 4.989 0 0121.5 9.122c0 3.072-2.652 4.959-5.197 7.222-2.512 2.243-3.865 3.469-4.303 3.752-.477-.309-2.143-1.823-4.303-3.752C5.141 14.072 2.5 12.167 2.5 9.122a4.989 4.989 0 014.708-5.218 4.21 4.21 0 013.675 1.941c.84 1.175.98 1.763 1.12 1.763s.278-.588 1.11-1.766a4.17 4.17 0 013.679-1.938m0-2a6.04 6.04 0 00-4.797 2.127 6.052 6.052 0 00-4.787-2.127A6.985 6.985 0 00.5 9.122c0 3.61 2.55 5.827 5.015 7.97.283.246.569.494.853.747l1.027.918a44.998 44.998 0 003.518 3.018 2 2 0 002.174 0 45.263 45.263 0 003.626-3.115l.922-.824c.293-.26.59-.519.885-.774 2.334-2.025 4.98-4.32 4.98-7.94a6.985 6.985 0 00-6.708-7.218z\"></path></svg></>\n                    :\n                    <button onClick={sendMessageHandler}  className=\"post-comment\">Send</button>\n                    }\n               </div>\n            </div>\n\n        </div>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}